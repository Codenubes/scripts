jenkins:
  securityRealm:
    local:
      allowsSignup: false
      users:
       - id: admin
         password: admin123
tool:
  git:
    installations:
    - home: "/bin/git"
      name: "Default"
  maven:
    installations:
    - name: "Maven 3"
      home: "/bin/maven3"
      properties:
      - installSource:
          installers:
            - maven:
                id: "3.5.4"
unclassified:
  location:
    url: http://loclhost:8080/
  githubpluginconfig:
    configs:
      - name: "InHouse GitHub EE"
        apiUrl: "http://loclhost:8080/"
        #credentialsId: "[GitHubEEUser]"
        manageHooks: true

jobs:
  - script: >
      pipelineJob("my first pipeline job") {
        agent any
        tools {
            maven 'maven'
        }
        stages {
            stage('Checkout') {
                steps {
                    git url: 'https://github.com/piomin/sample-spring-boot-autoscaler.git', credentialsId: 'github-piomin', branch: 'master'
                }
            }
            stage('Test') {
                steps {
                    dir('example-service') {
                        sh 'mvn clean test'
                    }
                }
            }
            stage('Build') {
                steps {
                    dir('example-service') {
                        sh 'mvn clean install'
                    }
                }
            }
        }
        post {
            always {
                junit '**/target/reports/**/*.xml'
            }
        }
      }    